#N canvas 960 60 960 995 12;
#X obj 992 812 cnv 15 236 315 empty empty Harmony\ Init\ and\ Stuff
20 10 0 20 #004e4d #00fff3 0;
#X obj 800 20 cnv 15 518 323 empty empty Harmony\ Control 20 10 0 20
#004e4d #00fff3 0;
#X obj 1420 820 cnv 15 302 257 empty empty Miscellaneous 19 9 0 20
#444444 #ffffff 0;
#X obj 660 820 cnv 15 302 257 empty empty Tonality\ Init\ and\ Stuff
19 9 0 20 #00082e #7073fa 0;
#X obj 20 820 cnv 15 613 591 empty empty Beat\ Init\ and\ Stuff 20
9 0 20 #074a00 #b9f200 0;
#X obj 560 20 cnv 15 236 315 empty empty Tonality\ Control 20 9 0 20
#00082e #7073fa 0;
#X obj 40 340 cnv 15 516 158 empty empty Beat\ Visualisation 18 12
0 20 #074a00 #b9f200 0;
#X obj 60 380 bng 113 250 50 0 empty \$0-measure Measure 17 7 0 14
#fcfcfc #000000 #000000;
#X obj 40 20 cnv 15 513 311 empty empty Beat\ Control 20 12 0 20 #074a00
#b9f200 0;
#X msg 320 40 \; \$0-ctrl-subs_per_beat 4 \; \$0-ctrl-beats_per_measure
3 \; \$0-ctrl-bpm 120 \; \$0-ctrl-beat_on 1 \;;
#X obj 160 60 bng 79 250 50 0 \$0-beat_reset \$0-ctrl-beat_reset BeatReset
17 7 0 14 #fcfcfc #000000 #000000;
#X obj 40 860 tgl 72 0 empty \$0-beat_on BeatOn 17 7 0 14 #fcfcfc #000000
#000000 1 1;
#X obj 120 920 util/metro_beat;
#X obj 280 1120 *;
#X floatatom 280 1160 5 0 0 2 SubsPerMeasure - #0-subs_per_measure
, f 5;
#X floatatom 1440 880 5 0 0 2 RandomSeed - #0-seed, f 5;
#X obj 300 1080 t b f;
#X text 340 340 Note: - Set the subs_per_beat before the bpm - Set
the beat_on message last. Otherwise the metronome won't start on first
try., f 31;
#X obj 40 960 bng 71 250 50 0 empty empty BeatReset 17 8 0 14 #fcfcfc
#000000 #000000;
#X obj 1440 920 loadbang;
#X obj 1100 200 t b b b b;
#X msg 1120 220 0 0 4 7;
#X msg 1120 240 1 0 4 7;
#X msg 1120 260 2 5 9 0 2;
#X msg 1120 280 3 5 9 0 3;
#X obj 780 500 r \$0-tonality;
#X obj 120 860 r \$0-beat_reset, f 16;
#X obj 240 860 r \$0-bpm;
#X obj 300 860 r \$0-beats_per_measure;
#X obj 460 860 r \$0-subs_per_beat;
#X obj 120 960 s \$0-measure;
#X obj 220 960 s \$0-beat;
#X obj 300 960 s \$0-subbeat;
#X obj 280 1040 r \$0-beats_per_measure;
#X obj 300 1060 r \$0-subs_per_beat;
#X obj 460 1120 *;
#X floatatom 460 1160 5 0 0 2 SubsPerMinute - #0-subs_per_minute,
f 5;
#X obj 480 1080 t b f;
#X obj 480 1060 r \$0-subs_per_beat;
#X floatatom 440 1020 5 0 0 2 MeasuresPerMinute - #0-measures_per_minute
, f 5;
#X obj 460 940 t b f;
#X obj 460 920 r \$0-beats_per_measure;
#X obj 440 980 /;
#X obj 460 1040 r \$0-bpm;
#X obj 460 900 r \$0-bpm;
#X obj 60 60 tgl 79 0 \$0-beat_on \$0-ctrl-beat_on BeatOn 17 7 0 14
#fcfcfc #000000 #000000 1 1;
#X obj 60 200 hradio 26 0 0 9 \$0-beats_per_measure \$0-ctrl-beats_per_measure
Beats/Measure 0 -8 0 14 #fcfcfc #000000 #000000 4;
#X obj 60 240 hradio 26 0 0 9 \$0-subs_per_beat \$0-ctrl-subs_per_beat
Subbeat/Beat 0 -8 0 14 #fcfcfc #000000 #000000 4;
#X obj 60 160 hsl 194 26 20 220 0 0 \$0-bpm \$0-ctrl-bpm Beats/Minute
-2 -8 0 14 #000000 #000000 #00ff2c 2895 1;
#X floatatom 220 140 5 0 0 0 - #0-bpm -, f 5;
#X floatatom 260 180 5 0 0 0 - #0-beats_per_measure -, f 5;
#X floatatom 260 220 5 0 0 0 - #0-subs_per_beat -, f 5;
#X obj 180 380 hradio 46 0 0 4 empty \$0-vis-beat Beat 0 -8 0 14 #fcfcfc
#000000 #000000 0;
#X obj 180 440 hradio 48 0 0 4 empty \$0-vis-subbeat Subbeat 0 -8 0
14 #fcfcfc #000000 #000000 0;
#X obj 680 860 loadbang;
#X obj 680 900 s \$0-ctrl-tonality-mode;
#X obj 680 980 r \$0-tonality-key;
#X obj 700 1000 r \$0-tonality-mode;
#X obj 680 1020 pack f f;
#X obj 680 1040 s \$0-tonality;
#X msg 680 920 names A Bb B C Db Eb E F Gb G Ab;
#X obj 680 940 s \$0-ctrl-tonality-key;
#X dropdown 600 100 11 0 0 2 Mode #0-ctrl-tonality-mode #0-tonality-mode
, f 11;
#X dropdown 600 60 11 0 0 2 Key #0-ctrl-tonality-key #0-tonality-key
, f 11;
#X msg 120 1120 number \$1;
#X msg 40 1080 number \$1;
#X obj 40 1060 r \$0-beats_per_measure;
#X obj 120 1100 r \$0-subs_per_beat;
#X obj 40 1160 s \$0-vis-beat;
#X obj 40 1040 r \$0-beat;
#X obj 120 1080 r \$0-subbeat;
#X obj 140 1160 s \$0-vis-subbeat;
#X msg 600 140 \; \$0-tonality-key A \; \$0-tonality-mode major \;
, f 25;
#X msg 600 220 \; \$0-tonality-key E \; \$0-tonality-mode minor \;
, f 25;
#X msg 1440 940 \; g-gaussian_res 64 \;;
#X obj 880 140 hradio 26 0 0 6 \$0-harmony_octave-mean \$0-ctrl-harmony_octave-mean
Octave 0 -8 0 14 #fcfcfc #000000 #000000 0;
#X obj 800 160 vsl 32 86 0 127 0 0 \$0-harmony_vel-mean \$0-ctrl-harmony_vel-mean
Velocity 0 -9 0 14 #fcfcfc #000000 #000000 4250 1;
#X obj 1120 300 s \$0-harmony_chords;
#X msg 1020 80 \; \$0-ctrl-harmony_octave-mean 3 \; \$0-ctrl-harmony_vel-mean
70 \;;
#X dropdown 860 100 11 1 0 2 Section #0-ctrl-harmony_section_select
#0-harmony_section_select, f 11;
#X obj 1520 860 loadbang;
#X msg 1520 880 names measure beat subbeat;
#X obj 1520 900 s \$0-section_select;
#X obj 1020 860 r \$0-section_select;
#X msg 680 880 names minor major;
#X obj 1100 180 loadbang;
#X obj 320 1300 r \$0-bpm;
#X obj 260 1240 r \$0-beat;
#X obj 260 1380 s \$0-beat_params;
#X obj 20 1220 r \$0-measure;
#X obj 80 1260 r \$0-measures_per_minute;
#X obj 40 1380 s \$0-measure_params;
#X obj 440 1240 r \$0-subbeat;
#X obj 500 1300 r \$0-subs_per_minute;
#X obj 456 1371 s \$0-subbeat_params;
#X text 640 1460 Hullo;
#X obj 1120 980 r \$0-beat_params;
#X obj 1160 1000 r \$0-subbeat_params;
#X obj 1080 960 r \$0-measure_params;
#X obj 60 1300 t b f;
#X obj 320 1320 t b f;
#X obj 500 1320 t b f, f 6;
#X msg 120 900 reset;
#X obj 1000 940 r \$0-harmony_section_select;
#X obj 1020 880 s \$0-ctrl-harmony_section_select;
#X obj 1050 1062 s \$0-harmony_section_params;
#X obj 660 440 r \$0-harmony_section_params;
#X obj 780 480 r \$0-harmony_chords;
#X obj 820 520 r \$0-harmony_octave;
#X obj 860 560 r \$0-harmony_dur;
#X obj 1200 420 r \$0-harmony_octave-mean;
#X obj 1200 460 s \$0-harmony_octave;
#X obj 1240 520 r \$0-harmony_vel-mean;
#X obj 1252 553 s \$0-harmony_vel;
#X obj 1280 580 r \$0-harmony_dur-mean;
#X obj 1280 680 s \$0-harmony_dur;
#X obj 860 220 vsl 32 86 0.1 2 0 0 \$0-harmony_dur-mean \$0-ctrl-harmony_dur-mean
Duration\ (in\ sections) 0 -9 0 14 #fcfcfc #000000 #000000 1450 1;
#X obj 840 540 r \$0-harmony_vel;
#X obj 640 720 bng 54 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X msg 40 1260 1;
#X obj 40 1240 loadbang;
#X obj 40 1280 t b f;
#X obj 20 1360 pack f f f;
#X obj 280 1260 r \$0-beats_per_measure;
#X obj 260 1360 pack f f f;
#X obj 280 1280 t b f;
#X obj 460 1260 r \$0-subs_per_beat;
#X obj 460 1280 t b f;
#X obj 456 1351 pack f f f;
#X obj 1020 1020 util/choose_section_params;
#X msg 320 240 \; \$0-ctrl-beat_on 0 \; \$0-ctrl-beat_reset bang \;
;
#X obj 660 580 util/chord_to_midi;
#X msg 320 140 \; \$0-ctrl-subs_per_beat 4 \; \$0-ctrl-beats_per_measure
4 \; \$0-ctrl-bpm 50 \; \$0-ctrl-beat_on 1 \;;
#X obj 660 520 util/chord_sync;
#X connect 11 0 12 0;
#X connect 12 0 30 0;
#X connect 12 1 31 0;
#X connect 12 2 32 0;
#X connect 13 0 14 0;
#X connect 16 0 13 0;
#X connect 16 1 13 1;
#X connect 19 0 74 0;
#X connect 20 0 24 0;
#X connect 20 1 23 0;
#X connect 20 2 22 0;
#X connect 20 3 21 0;
#X connect 21 0 77 0;
#X connect 22 0 77 0;
#X connect 23 0 77 0;
#X connect 24 0 77 0;
#X connect 25 0 131 1;
#X connect 26 0 102 0;
#X connect 26 0 18 0;
#X connect 27 0 12 1;
#X connect 28 0 12 2;
#X connect 29 0 12 3;
#X connect 33 0 13 0;
#X connect 34 0 16 0;
#X connect 35 0 36 0;
#X connect 37 0 35 0;
#X connect 37 1 35 1;
#X connect 38 0 37 0;
#X connect 40 0 42 0;
#X connect 40 1 42 1;
#X connect 41 0 40 0;
#X connect 42 0 39 0;
#X connect 43 0 35 0;
#X connect 44 0 42 0;
#X connect 54 0 84 0;
#X connect 56 0 58 0;
#X connect 57 0 58 1;
#X connect 58 0 59 0;
#X connect 60 0 61 0;
#X connect 64 0 71 0;
#X connect 65 0 68 0;
#X connect 66 0 65 0;
#X connect 67 0 64 0;
#X connect 69 0 68 0;
#X connect 70 0 71 0;
#X connect 80 0 81 0;
#X connect 81 0 82 0;
#X connect 83 0 104 0;
#X connect 84 0 55 0;
#X connect 84 0 60 0;
#X connect 85 0 20 0;
#X connect 86 0 100 0;
#X connect 87 0 124 0;
#X connect 89 0 122 0;
#X connect 90 0 99 0;
#X connect 92 0 128 0;
#X connect 93 0 101 0;
#X connect 96 0 129 2;
#X connect 97 0 129 3;
#X connect 98 0 129 1;
#X connect 99 0 122 0;
#X connect 99 1 122 2;
#X connect 100 0 124 0;
#X connect 100 1 124 2;
#X connect 101 0 128 0;
#X connect 101 1 128 2;
#X connect 102 0 12 0;
#X connect 103 0 129 0;
#X connect 106 0 131 5;
#X connect 106 0 133 0;
#X connect 107 0 133 1;
#X connect 108 0 131 2;
#X connect 109 0 131 4;
#X connect 110 0 111 0;
#X connect 112 0 113 0;
#X connect 114 0 115 0;
#X connect 117 0 131 3;
#X connect 119 0 121 0;
#X connect 120 0 119 0;
#X connect 121 0 122 0;
#X connect 121 1 122 1;
#X connect 122 0 91 0;
#X connect 123 0 125 0;
#X connect 124 0 88 0;
#X connect 125 0 124 0;
#X connect 125 1 124 1;
#X connect 126 0 127 0;
#X connect 127 0 128 0;
#X connect 127 1 128 1;
#X connect 128 0 94 0;
#X connect 129 0 105 0;
#X connect 131 0 118 0;
#X connect 133 0 131 0;
